{"version":3,"sources":["core.js"],"names":["googlePlus","url","window","location","protocol","host","open","$c","document","createElement","bind","$el","getElementById","util","getReferrerTag","ref","referrer","indexOf","href","components","forms","doc","win","updateZIPPlaceholder","ZIPLabel","countrySelect","value","setAttribute","toggleCountryField","countryInput","remove","classList","add","countryLabel","removeForm","commitmentForm","clientHeight","setTimeout","handleSigningError","e","errorMessage","errorMessageInfo","removeAttribute","submitted","textContent","type","status","statusText","modals","generateModal","submitButton","handleSigningSuccess","modalContent","share","getElementsByClassName","console","log","innerHTML","querySelector","addEventListener","FreeProgress","tweet","submitForm","event","compilePayload","tags","push","formData","FormData","append","pathname","JSON","stringify","action","replace","loadSignatureResponse","commitmentStatus","preventDefault","XMLHttpRequest","appendChild","send","addEventListeners","init","body","getElementsByTagName","dismissModal","modal","contents","disableOverlayClick","closeModal","overlay","undefined","length","id","i","modalParent","noConnectionModal","message","views","triggerComponents","dataset","split","listenerFn","top","pageYOffset","scrollTop","clientTop","removeEventListener","smoothScroll","gl","querySelectorAll","script","src","head"],"mappings":"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","file":"core.js","sourcesContent":["/**\n *\n * @source: https://github.com/fightforthefuture/savesecurity.org\n *\n * @licstart  The following is the entire license notice for the\n *  JavaScript code in this page.\n *\n * Copyright (C) Fight for the Future\n *\n *\n * The JavaScript code in this page is free software: you can\n * redistribute it and/or modify it under the terms of the GNU\n * General Public License (GNU GPL) as published by the Free Software\n * Foundation, either version 3 of the License, or (at your option)\n * any later version.  The code is distributed WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS\n * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.\n *\n * As additional permission under GNU GPL version 3 section 7, you\n * may distribute non-source (e.g., minimized or compacted) forms of\n * that code without the copy of the GNU GPL normally required by\n * section 4, provided you include this license notice and a URL\n * through which recipients can access the Corresponding Source.\n *\n * @licend  The above is the entire license notice\n * for the JavaScript code in this page.\n *\n */\n\n/**\n *  util : random grab bag functions\n */\n\nvar $c  = document.createElement.bind(document);\nvar $el = document.getElementById.bind(document);\n\nutil = {\n  getReferrerTag: function() {\n    var ref = document.referrer;\n    if (ref.indexOf('facebook.com') !== -1)\n      return 'from-facebook';\n    else if (ref.indexOf('twitter.com') !== -1 || ref.indexOf('t.co') !== -1)\n      return 'from-twitter';\n    else if (ref.indexOf('reddit.com') !== -1)\n      return 'from-reddit';\n    else if (window.location.href.indexOf('_src=ga') !== -1)\n      return 'from-google-adwords';\n    else if (ref.indexOf('google.com') !== -1)\n      return 'from-google';\n  }\n}\n\nwindow.components = window.components || {};\nwindow.components.forms = function (doc, win) {\n  /**\n   * Retrieves form data from Action Network API, then submits entry\n   * @param {object} doc - Document object\n   * @param {object} win - Window object\n   * */\n  \"use strict\";\n\n  var\n    body = doc.getElementsByTagName('body')[0],\n    submitButton = body.querySelector('[type=\"submit\"]'),\n    submitted = doc.createElement('div'),\n    countryLabel = doc.querySelector('[for=\"select-country\"]'),\n    countrySelect = doc.getElementById('select-country'),\n    countryInput = doc.getElementById('hidden-country'),\n    commitmentForm = doc.forms[0];\n\n  submitted.classList.add('submitted');\n  submitted.innerHTML = '<div class=\"circle-spinner\">&nbsp;</div>';\n\n  function updateZIPPlaceholder() {\n    /**\n     * Updates placeholder on ZIP/Post Code field to be appropriate for country\n     * selected\n     * */\n    var\n      ZIPLabel = doc.getElementById('form-zip_code');\n\n    if (countrySelect.value !== 'US') {\n      ZIPLabel.setAttribute('placeholder', 'Post code');\n    } else {\n      ZIPLabel.setAttribute('placeholder', 'ZIP');\n    }\n  }\n\n  function toggleCountryField() {\n    /**\n     * Hides the label and shows the select when someone changes their signature\n     * country.\n     * */\n\n    countryInput.remove();\n    countrySelect.setAttribute('name', 'answer[country]');\n    countrySelect.classList.add('visible');\n    countryLabel.classList.add('hidden');\n  }\n\n  function removeForm() {\n    commitmentForm.setAttribute('style', 'height: ' + commitmentForm.clientHeight + 'px;');\n    win.setTimeout(function(){\n      commitmentForm.setAttribute('style', 'height: 0;');\n    }, 20)\n  }\n\n  function handleSigningError(e) {\n    /**\n     * Figures out what to say at just the right moment\n     * @param {event|XMLHttpRequest} e - Might be an event, might be a response\n     * from an XMLHttpRequest\n     * */\n\n    var\n      errorMessage = doc.createElement('h2'),\n      errorMessageInfo = doc.createElement('p');\n\n    commitmentForm.removeAttribute('disabled');\n    submitted.remove();\n    errorMessage.textContent = 'Something went wrong';\n    if (e.type) {\n      errorMessageInfo.textContent = 'There seems to be a problem somewhere in between your computer and our server. Might not be a bad idea to give it another try.';\n    } else if (e.status) {\n      errorMessageInfo.textContent = '(the nerdy info is that the server returned a status of \"' + e.status + '\" and said \"' + e.statusText + '\".)'\n    } else {\n      errorMessageInfo.textContent = 'this seems to be a weird error. the nerds have been alerted.';\n    }\n\n    win.modals.generateModal([errorMessage, errorMessageInfo]);\n\n    submitted.remove();\n    submitButton.removeAttribute('disabled');\n  }\n\n  function handleSigningSuccess() {\n    /**\n     * Figures out what to say at just the right moment\n     * @param {event|XMLHttpRequest} e - Might be an event, might be a response\n     * from an XMLHttpRequest\n     * */\n\n    var\n      modalContent = doc.createElement('div'),\n      share = doc.getElementsByClassName('share')[0];\n\n    console.log('share:' ,share);\n\n    share.classList.add('visible');\n    modalContent.innerHTML = '<h2>Thanks for signing</h2>\\n<p>Now, share this page to spread the word.</p><ul class=\"share inline visible\">\\n'+share.innerHTML+'</ul><p><small>â€¦or, <a href=\"https://donate.fightforthefuture.org/?amount=5&frequency=just-once\">chip in $5</a> to help us spread the message.</small></p>';\n\n    win.modals.generateModal([modalContent]);\n    removeForm();\n\n    document.querySelector('.modal-content button.facebook').addEventListener('click', FreeProgress.share.bind(FreeProgress));\n    document.querySelector('.modal-content button.google').addEventListener('click', googlePlus);\n    document.querySelector('.modal-content button.twitter').addEventListener('click', FreeProgress.tweet.bind(FreeProgress));\n  }\n\n  function submitForm(event) {\n    /**\n     * Submits the form to ActionNetwork.\n     * @param {event} event - Form submission event\n     * */\n\n    event.preventDefault();\n\n    var\n      commitmentStatus = new XMLHttpRequest();\n\n    commitmentForm.setAttribute('disabled', true);\n    submitted.classList.add('submitted');\n    submitButton.setAttribute('disabled', true);\n    commitmentForm.appendChild(submitted);\n\n    function compilePayload() {\n      /**\n       * Compiles the form data into a JSON payload for Ajax submission\n       * @return {object} petitionFormData - just the info the API needs\n       * */\n\n      /**\n       * Compiles the form data into a JSON payload for Ajax submission\n       * @return {object} petitionFormData - just the info the API needs\n       * */\n      var tags = ['encryption'];\n      if (util.getReferrerTag())\n        tags.push(util.getReferrerTag());\n\n      var formData = new FormData();\n      formData.append('guard', '');\n      formData.append('hp_enabled', true);\n      formData.append('org', 'fftf');\n      formData.append('tag', window.location.pathname);\n      formData.append('an_tags', JSON.stringify(tags));\n      formData.append('an_petition', doc.getElementById('petition-form').action.replace('/signatures', ''));\n\n      formData.append('member[email]', doc.getElementById('form-email').value);\n      formData.append('member[postcode]', doc.getElementById('form-zip_code').value);\n      formData.append('member[country]', countrySelect.value);\n\n      if (doc.getElementById('form-street_address')) {\n        formData.append('member[street_address]', doc.getElementById('form-street_address').value);\n      }\n\n      if (doc.getElementById('form-first_name')) {\n        formData.append('member[first_name]', doc.getElementById('form-first_name').value);\n      }\n\n      if (doc.getElementById('form-comments')) {\n        formData.append('action_comment', doc.getElementById('form-comments').value);\n      }\n\n      return formData;\n\n      /*\n      var\n        petitionFormData = {\n          identifier: 'dad151da-e162-4ec5-8679-655bfcb2d03f',\n          website: win.location.origin,\n          tags: JSON.parse(doc.querySelector('[name=\"subscription[tag_list]\"]').value),\n          noOptIn: false,\n          name: doc.getElementById('form-first_name').value,\n          email: doc.getElementById('form-email').value,\n          ZIP: doc.getElementById('form-zip_code').value,\n          country: countrySelect.value,\n          comments: doc.getElementById('form-comments').value\n        };\n\n      return JSON.stringify(petitionFormData);\n      */\n    }\n\n    function loadSignatureResponse() {\n      /**\n       * Does the thing after we get a response from the API server\n       * */\n\n      if (commitmentStatus.status >= 200 && commitmentStatus.status < 400) {\n        handleSigningSuccess();\n      } else {\n        handleSigningError(commitmentStatus);\n      }\n    }\n\n    commitmentStatus.open('POST', 'https://queue.fightforthefuture.org/action', true);\n    // commitmentStatus.open('POST', 'http://localhost:9001/action', true);\n    commitmentStatus.addEventListener('error', handleSigningError);\n    commitmentStatus.addEventListener('load', loadSignatureResponse);\n    commitmentStatus.send(compilePayload());\n  }\n\n  function addEventListeners() {\n    /**\n     * Attaches all the listeners all the places\n     * */\n    countryLabel.addEventListener('click', toggleCountryField);\n    countrySelect.addEventListener('change', updateZIPPlaceholder);\n    commitmentForm.addEventListener('submit', submitForm);\n  }\n\n  function init() {\n    addEventListeners();\n  }\n\n  init();\n  // setTimeout(function() { handleSigningSuccess() }, 500); // JL DEBUG ~\n};\n\n(function (doc, win) {\n  \"use strict\";\n\n  win.modals = win.modals || {};\n\n  var\n    i,\n    body = doc.getElementsByTagName('body')[0],\n    modalParent = doc.createElement('div');\n\n  modalParent.classList.add('modal-parent', 'fade-in');\n\n  function dismissModal() {\n    /**\n     * Removes modal from DOM\n     * */\n\n    var\n      modal = doc.getElementsByClassName('modal-content')[0];\n\n    doc.getElementsByClassName('overlay')[0].remove();\n    modal.removeAttribute('style');\n    modal.classList.add('off-screen');\n    win.setTimeout(function () {\n      modal.remove();\n    }, 420);\n  }\n\n  function generateModal(contents, disableOverlayClick) {\n    /**\n     * Triggers a modal\n     *\n     * @param {node} contents - any HTML to be used as modal content (also\n     *   accepts array of nodes)\n     * @param {boolean} disableOverlayClick - if false (or absent), function\n     *   adds event listener to allow dismissal of modal by clicking on\n     *   overlay.\n     * */\n\n    var\n      overlay = doc.createElement('div'),\n      modal = doc.createElement('div'),\n      closeModal;\n\n    if (contents.length === undefined) {\n      contents = [contents];\n    }\n\n    if (typeof disableOverlayClick !== 'boolean') {\n      disableOverlayClick = false;\n    }\n\n    overlay.id = disableOverlayClick ? 'no-click-for-you' : 'dismiss-me';\n    overlay.classList.add('overlay');\n    modal.classList.add('modal-content');\n\n    if (!disableOverlayClick) {\n      closeModal = doc.createElement('button');\n      closeModal.classList.add('close-modal');\n      closeModal.innerHTML = '&times;';\n      modal.appendChild(closeModal);\n      closeModal.addEventListener('click', dismissModal);\n      overlay.addEventListener('click', dismissModal);\n    }\n\n    for (i = 0; i < contents.length; i++) {\n      modal.appendChild(contents[i]);\n    }\n\n    modalParent.appendChild(overlay);\n    modalParent.appendChild(modal);\n    body.appendChild(modalParent);\n\n    win.setTimeout(function () {\n      modalParent.classList.remove('fade-in');\n    }, 500);\n  }\n\n  function noConnectionModal() {\n    /**\n     * noConnectionModal();\n     * Triggers a modal which reads:\n     * > Something went wrong.\n     * > Do you have a network connection?\n     * */\n\n    dismissModal();\n    var\n      message = doc.createElement('h2');\n\n    message.innerHTML = 'Something went wrong.<br />Do you have a network connection?';\n    generateModal([message]);\n  }\n\n  win.modals.dismissModal = dismissModal;\n  win.modals.generateModal = generateModal;\n  win.modals.noConnectionModal = noConnectionModal;\n\n\n}(document, window));\n\n\n\n/******************** *\n * FFTF Donate Modals *\n ******************** */\n(function (doc, win) {\n  \"use strict\";\n\n  win.modals = win.modals || {};\n\n  var\n    i,\n    body = doc.getElementsByTagName('body')[0],\n    modalParent = doc.createElement('div');\n\n  modalParent.classList.add('modal-parent');\n\n  function dismissModal() {\n    /**\n     * Removes modal from DOM\n     * */\n\n    var\n      modal = doc.getElementsByClassName('modal-parent')[0];\n\n    modal.setAttribute('style', 'opacity: 0');\n\n    win.setTimeout(function () {\n      modal.remove();\n    }, 420);\n  }\n\n  function generateModal(contents, disableOverlayClick) {\n    /**\n     * Triggers a modal\n     *\n     * @param {node} contents - any HTML to be used as modal content (also\n     *   accepts array of nodes)\n     * @param {boolean} disableOverlayClick - if false (or absent), function\n     *   adds event listener to allow dismissal of modal by clicking on\n     *   overlay.\n     * */\n\n    var\n      overlay = doc.createElement('div'),\n      modal = doc.createElement('div'),\n      closeModal;\n\n    if (contents.length === undefined) {\n      contents = [contents];\n    }\n\n    if (typeof disableOverlayClick !== 'boolean') {\n      disableOverlayClick = false;\n    }\n\n    overlay.id = disableOverlayClick ? 'no-click-for-you' : 'dismiss-me';\n    overlay.classList.add('overlay');\n    modal.classList.add('modal-content', 'off-screen');\n\n    if (!disableOverlayClick) {\n      closeModal = doc.createElement('button');\n      closeModal.classList.add('close-modal');\n      closeModal.innerHTML = '&times;';\n      modal.appendChild(closeModal);\n      closeModal.addEventListener('click', dismissModal);\n      overlay.addEventListener('click', dismissModal);\n    }\n\n    for (i = 0; i < contents.length; i++) {\n      modal.appendChild(contents[i]);\n    }\n\n    modalParent.appendChild(overlay);\n    modalParent.appendChild(modal);\n    body.appendChild(modalParent);\n\n    win.setTimeout(function () {\n      modal.classList.remove('off-screen');\n    }, 50);\n  }\n\n  function noConnectionModal() {\n    /**\n     * noConnectionModal();\n     * Triggers a modal which reads:\n     * > Something went wrong.\n     * > Do you have a network connection?\n     * */\n\n    dismissModal();\n    var\n      message = doc.createElement('h2');\n\n    message.innerHTML = 'Something went wrong.<br />Do you have a network connection?';\n    generateModal([message]);\n  }\n\n  win.modals.dismissModal = dismissModal;\n  win.modals.generateModal = generateModal;\n  win.modals.noConnectionModal = noConnectionModal;\n\n\n}(document, window));\n\n(function (doc, win) {\n  win.views = win.views || {};\n  win.views.modals = {}}(document, window));\n\nvar $c  = document.createElement.bind(document);\n\nfunction googlePlus() {\n  var url = window.location.protocol + '//' + window.location.host;\n  window.open('https://plus.google.com/share?url='+url, 'share_gl', 'width=500, height=300, toolbar=no, status=no, menubar=no');\n}\n\n(function (doc, win) {\n  \"use strict\";\n\n  function triggerComponents() {\n    win.components = win.components || {};\n    var\n      i = 0,\n      components = doc.getElementsByTagName('body')[0].dataset.components;\n\n    if (components !== undefined) {\n      components = components.split(' ');\n      i = components.length;\n\n      while (i--) {\n        if (components[i] !== '' && win.components[components[i]] !== undefined) {\n          win.components[components[i]](doc, win);\n        }\n      }\n    }\n  }\n\n  triggerComponents();\n\n  var listenerFn = function() {\n    var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\n    if (top > 300) {\n      window.removeEventListener('scroll', listenerFn);\n      document.querySelector('ul.share').classList.add('visible');\n    }\n  };\n\n\n  window.addEventListener('scroll', listenerFn);\n  doc.querySelector('[href=\"#strong-security-saves-lives\"]').addEventListener('click', function (e){\n    e.preventDefault();\n\n    win.smoothScroll(doc.getElementById('strong-security-saves-lives'));\n  });\n\n  var gl = document.querySelectorAll('button.google');\n    for (var i = 0; i < gl.length; i++) {\n        gl[i].addEventListener('click', function(e) {\n            e.preventDefault();\n            googlePlus();\n        }, false);\n    }\n\n  if (window.location.href.indexOf('ALWAYS_SHOW_SC_BANNER') !== -1) {\n    var script = document.createElement('script');\n    script.src = '/banner.js';\n    document.head.appendChild(script);\n  }\n\n\n})(document, window);\n\n//# sourceMappingURL=core.js.map"]}